<mat-card class="forecast-card">
  <div fxLayout="column" fxFill class="content">

    <div fxLayout="column" fxLayout.gt-sm="row">
      <span fxFlex="1 1" fxLayoutAlign="start center">
        <span [fxHide]="loading">
          {{weatherData?.updated ? 'Updated:' : 'Sample:'}} {{(weatherData?.updated || weatherData?.list[0].dt * 1000)
          |
          date: 'EEE dd MMM HH:mm'}} {{'Time slots: ' + weatherData?.cnt}}
        </span>
      </span>
      <h4 fxFlex="1 1" fxLayout="column" fxLayoutAlign="center center">
        OWM Forecast
        <mat-spinner *ngIf="loading"></mat-spinner>
      </h4>
      <span fxFlex="1 1" fxLayoutAlign="end center">
        <mat-form-field [fxHide]="loading">
          <mat-select placeholder="City" [(value)]="selectedCityId" (selectionChange)="onChange()">
            <mat-option *ngFor="let city of cities$ | async" [value]="city.id">
              <span fxFlex>
                {{city.name}}
              </span>
              <span fxFlex fxLayoutAlign="end center">
                {{city.iso2}}
              </span>
            </mat-option>
          </mat-select>
        </mat-form-field>
      </span>
    </div>

    <div fxFlex fxLayout="row" [fxHide]="loading" class="scroll-this">

      <div fxFlex="10%" fxLayout="column" fxFill>
        <div fxFlex="10%" fxLayout="column" class="table-00-background">
          <span fxLayoutAlign="end center">Hour</span>
          <div fxFlex></div>
          <span fxLayoutAlign="start start">Date</span>
        </div>

        <div fxFlex fxLayout="column" fxFill>
          <div fxFlex fxLayoutAlign="start center" *ngFor="let dataDaily of weatherData?.listByDate | keyvalue; index as $index;">
            <span fxLayout="column" fxLayout.gt-md="row">
              <span>
                {{dataDaily.key | date: 'EEE'}}&nbsp;
              </span>
              <span>
                {{dataDaily.key | date: 'dd MMM'}}
              </span>
            </span>
          </div>
        </div>
      </div>

      <div fxFlex fxLayout="column" class="scroll-this">

        <div fxFlex="10%" fxLayout="row">
          <span fxFlex fxLayoutAlign="center center" class="table-header-background" *ngFor="let hour of hoursTemplate">
            {{(hour > 9 ? '' : '0' ) + hour + ':00' }}
          </span>
        </div>

        <div fxFlex *ngFor="let dataDaily of weatherData?.listByDate | keyvalue; index as $index;">

          <span fxFlex fxLayout="row" *ngFor="let hour of hoursTemplate">
            <span fxFlex class="table-data_cell_empty-background" *ngIf="!dataDaily.value[hour]"></span>
            <span fxFlex class="table-data_cell-background" *ngIf="dataDaily.value[hour]" fxLayout="column"
              fxLayoutAlign="center center">

              <span fxLayout="row" fxLayoutAlign="start center">
                <img fxHide.xs [src]="iconsUrl + dataDaily.value[hour].weather[0].icon + '.png'">
                {{dataDaily.value[hour].weather[0].main }} {{dataDaily.value[hour].main.temp | number:'1.0-0'}}&#176;C
              </span>

              <small fxLayout="column" fxLayoutAlign="start start">
                <span fxLayout="row" fxHide.xs class="table-secondary_data-opacity" fxLayoutAlign="start end">
                  <img fxHide.xs [src]="iconPressure">
                  &nbsp;{{dataDaily.value[hour].main.pressure | number:'1.0-0'}}&nbsp;<small>mm<br>Hg</small>
                </span>
                <span fxLayout="row" fxHide.xs class="table-secondary_data-opacity" fxLayoutAlign="start end">
                  <img fxHide.xs [src]="iconWind">
                  &nbsp;{{dataDaily.value[hour].wind.speed | number:'1.0-0'}}&nbsp;<small>m/s</small>
                </span>
                <span fxLayout="row" fxHide.xs class="table-secondary_data-opacity" fxLayoutAlign="start end">
                  <img fxHide.xs [src]="iconHumidity">
                  &nbsp;{{dataDaily.value[hour].main.humidity | number:'1.0-0'}}<small>%</small>
                </span>
              </small>
            </span>

          </span>
        </div>

      </div>
    </div>
  </div>
</mat-card>
